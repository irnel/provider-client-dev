<!-- Category Details -->
<div *ngIf="observer$ | async; else progress" class="w-responsive h-responsive mt-3 mb-3 center ml-auto mr-auto">
  <mdb-card>
    <h6 class="h6-responsive text-center mt-3">
      <!-- Provider -->
      <div *ngIf="userRole === 'provider'">
        <i (click)="redirectToProviderHome()" class="fa fa-home prefix mr-2" aria-hidden="true"></i>
        <a routerLink="/provider-dashboard/workspace/home">Home</a>
        <span> / </span>
        <a routerLink="/provider-dashboard/workspace/providers">Providers</a>
        <span> / </span>
        <a routerLink="/provider-dashboard/workspace/providers/{{providerId}}/orders">Orders</a>
        <span> / </span>
        <span>Details</span>
      </div>

      <!-- Admin -->
      <div *ngIf="userRole === 'admin'">
        <i (click)="redirectToAdminHome()" class="fa fa-home prefix mr-2" aria-hidden="true"></i>
        <a routerLink="/admin-dashboard/workspace/home">Home</a>
        <span> / </span>
        <a routerLink="/admin-dashboard/workspace/users">Users</a>
        <span> / </span>
        <a routerLink="/admin-dashboard/workspace/users/{{userId}}/providers">Providers</a>
        <span> / </span>
        <a routerLink="/admin-dashboard/workspace/users/{{userId}}/providers/{{providerId}}/orders">Orders</a>
        <span> / </span>
        <span>Details</span>
      </div>

      <!-- Cashier -->
      <div *ngIf="userRole === 'cashier'">
        <i (click)="redirectToCashierHome()" class="fa fa-home prefix mr-2" aria-hidden="true"></i>
        <a routerLink="/cashier-dashboard/workspace/home">Home</a>
        <span> / </span>
        <span>Order</span>
        <span> / </span>
        <span>Details</span>
      </div>
    </h6>

    <hr>

    <mdb-card-body>
      <!-- Order data -->             
      <div class="container mb-3">
        <div class="row d-flex">
          <div class="col">
            <!-- Paid -->
            <h6 class="h6-responsive text-center dark-grey-text"><strong>Paid</strong>
              <span class="badge badge-pill ml-1 mr-4"
                  [ngStyle]="{'background-color': order.paid ? '#00C851' : '#ff4444' }">
  
                {{valueToString(order.paid) | uppercase}}
              </span>
            </h6>                      
          </div>

          <div class="col-sm-5">
            <!-- Status -->
            <h6 class="h6-responsive text-center"><strong>Status</strong>
              <span class="badge badge-pill ml-1 mr-4"
                  [ngStyle]="{
                    'background-color': order.status === completed ? '#00C851' : '#ff4444'}">
                  
                {{order.status | uppercase}}
              </span>
            </h6>

          </div>
        </div>
      </div>
      
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Name</strong></mat-panel-title>    
          </mat-expansion-panel-header>

          <!-- Name -->
          <h4 class="h4-responsive font-weight-bold text-center">
            <strong>{{order.displayName}}</strong>
          </h4>
          <!-- ProviderName -->
          <p class="text-muted text-center">{{order.providerName}}</p>
        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true"
                            (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Order Id</strong></mat-panel-title>    
          </mat-expansion-panel-header>

          <h6 class="h6-responsive mt-0">
            <i class="fa fa-id-card-o prefix mr-2 mt-0" aria-hidden="true"></i>
            {{order.id}}
          </h6>
        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true"
                            (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
          <mat-panel-title><strong>Date and pickup time</strong></mat-panel-title>    
          </mat-expansion-panel-header>

          <div class="row">
            <div class="col"> 
              <!-- CreatedDate -->
              <h6 class="h6-responsive mt-0">
                <i class="fa fa-calendar-o prefix mr-2 mt-0" aria-hidden="true"></i>
                {{order.createdDate.toMillis() | date: 'dd/MM/yyyy h:mm:ss a z' }}
              </h6>           
            </div>
            <!-- Pickup Time -->
            <div class="col">
              <i class="fa fa-clock-o prefix mr-2 mt-0" aria-hidden="true"></i>
              <strong>{{order.pickupTime}}</strong>
            </div>
            
          </div>
        </mat-expansion-panel>

        <mat-expansion-panel>
          <mat-expansion-panel-header (opened)="panelOpenState = true"
                                      (closed)="panelOpenState = false">
            <mat-panel-title><strong>Product list</strong></mat-panel-title>
          </mat-expansion-panel-header>

          <!--Grid column-->
          <div class="col-md-12 my-1 text-left">
            <div class="card">
              <div class="card-body">
                <!-- Shopping Cart table -->
                <div class="table-responsive">
                  <table class="table product-table">
                    <!-- Table head -->
                    <thead class="mdb-color lighten-5">
                      <tr>
                        <th></th>
                        <th class="font-weight-bold">
                          <strong>Product</strong>
                        </th>
                        <th></th>
                        <th class="font-weight-bold">
                          <strong>Price</strong>
                        </th>
                        <th></th>
                      </tr>
                    </thead>
                    <!-- /.Table head -->

                    <!-- Table body -->
                    <tbody>

                      <!-- Rows -->
                      <tr *ngFor="let product of order.products">
                        <th scope="row">
                          <img src="{{product.url}}" alt="Product" class="card-img-top img-fluid z-depth-0 rounded">
                        </th>
                        <td style="width: 35%">
                          <h6 class="h6-responsive">
                            <strong>{{product.name}}</strong>
                          </h6>
                          <p class="text-muted">{{product.categoryName}}</p>
                        </td>
                        <td></td>
                        <td class="font-weight-bold align-middle" style="width: 15%">
                          <strong>${{product.price}}</strong>
                        </td>
                        <td></td>
                      </tr>
                      <!-- /.Rows -->                    

                    </tbody>
                    <!-- /.Table body -->
                  </table>

                </div>
                <!-- /.Shopping Cart table -->
              </div>
            </div>
          </div>
          <!--Grid column-->
        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Comments</strong></mat-panel-title>
          </mat-expansion-panel-header>

          <!-- Comments -->
          <p *ngIf="order.remarks.length === 0" class="card-text font-comments font-italic text-center">
            No comments
          </p>
          <p *ngIf="order.remarks.length > 0" class="card-text font-comments font-italic">
            {{order.remarks}}
          </p>
        </mat-expansion-panel>
      </mat-accordion>
    </mdb-card-body>

    <hr>

    <!-- Total Price -->
    <div class="d-flex justify-content-center align-items-center font-weight-bold blue-text">
      <h3 class="h3-responsive">
        <strong>Total</strong>
      </h3>

      <h3 class="h3-responsive ml-3">
        <strong>${{total}}</strong>
      </h3>
    </div>

  </mdb-card>
  <!-- Heading -->

  <!-- Floating Action Button -->
  <a type="button" mat-fab class="pink mat-elevation-z8">00:00</a>
  
</div>

<ng-template #progress>
  <app-circle-progress [state]="state"></app-circle-progress>
</ng-template>